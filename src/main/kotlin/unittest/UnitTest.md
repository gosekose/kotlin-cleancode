# 단위 테스트

- TDD 세 가지
    - 실패하는 단위 테스트를 작성할 떄 까지 실제 코드 작성 x
    - 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트 작성
    - 현재 실패하는 테스트를 통과할 정도로만 실제 코드 작성

- 깨끗한 테스트 코드 유지하기
    - 테스트 슈트
    - 테스트는 유연성, 유지보수성, 재사용성을 제공
        - 단위 테스트!!!
        - 테스트 케이스가 없다면 잠정적인 버그임
        - 테스트 커버리지가 높을수록 공포는 줄어듬
        - 실제 코드를 점검하는 자동화된 단위 테스트 슈트는 설계와 아키텍처를 최대한 꺠끗하게 보존하는 열쇠
- 깨끗한 테스트 코드
    - 가독성
    - BUILD-OPERATE-CHECK 패턴
        - 테스트 자료 만듬
        - 테스트 자료 조작
        - 조작한 결과
        - GIVEN-WHEN-Then
    - 도메인에 특화된 테스트 언어
        - 시스템 조작 API를 사용하는 대신 API 위에 함수와 유틸리티를 구현한 후 그 함수와 유틸리티를 사용하므로 테스트 코드를 짜기도 읽기도 쉬워짐
    - 이중 표준
        - 테스트 환경에서는 자원이 제한적임
        - 코드가 깔끔하면 실제 환경에서 메모리나 CPU를 많이 소비하는 것은 피해야하지만 테스트 환경에서는 고려해볼 사항
    - 테스트 당 하나의 assert?
        - 단일 assert면 좋지만 상황에 따라 증가할 수 있음
        - 보다 명확하게는 테스트 당 개념 하나
            - 하나의 개념속에 확인해야하는 것이 여러개 일 수 있음

- FIRST
    - 깨끗한 테스트는 다섯 가지 규칙을 따름
    - 빠르게 (Fast)
        - 테스트는 빠르게 돌아야 함
    - 독립적으로 (Independent)
        - 각 테스트는 서로 의존하면 안됨
        - 한 테스트가 다음 테스트가 실행될 환경을 준비해서는 안됨
    - 반복가능하게(Repeatable)
        - 테스트는 어떤 환경에서도 반복 가능해야 함
    - 자가검증하는 (Self-Validating)
        - 테스트는 부울 값으로 결과를 내야 함
        - 성공 아니면 실패
    - 적시에 (Timely)
        - 테스트는 적시에 작성해야 함